{"version":3,"sources":["services/yllapito.js","services/persons.js","services/personForm.js","services/filter.js","App.js","index.js"],"names":["baseUrl","yllapito","axios","get","then","response","data","newPerson","post","person","delete","concat","id","put","Persons","_ref","personsToShow","remover","Person","_ref2","react_default","a","createElement","name","number","onClick","map","key","PersonForm","form","onSubmit","value","nameValue","onChange","nameOnChange","numberValue","numberOnChange","type","Filter","text","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setNewFilter","_useState9","_useState10","notificationMsg","setNotificationMsg","_useState11","_useState12","errorNotificationMsg","setErrorNotificationMsg","useEffect","initialPersons","catch","error","console","log","alert","Notification","message","className","handleNotification","setTimeout","filter","toLowerCase","includes","removePersonFromList","event","preventDefault","oldPerson","length","window","confirm","changedPerson","returnedPerson","update","objectSpread","createNew","target","personForm","services_persons","promise","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.f4f94318.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newPerson) => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\n\nconst remove = (person) => {\n    const request = axios.delete(`${baseUrl}/${person.id}`)\n    return request.then(response => response.data)\n}\n\nconst update = (person) => {\n    const request = axios.put(`${baseUrl}/${person.id}`, person)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, remove, update }","import React from 'react'\n\nconst Persons = ({ personsToShow, remover }) => {\n\n    const Person = ({ person }) =>\n      <p>\n        {person.name} {person.number} <button onClick={() => remover(person)}>\n          poista\n    </button></p>\n  \n    return personsToShow.map(person =>\n      <Person person={person}\n        key={person.id} />\n    )\n  }\n\n  export default Persons","import React from 'react'\n\nconst PersonForm = ({ form }) => (\n    <form onSubmit={form.onSubmit}>\n      <div>\n        nimi: <input\n          value={form.nameValue}\n          onChange={form.nameOnChange}\n        />\n      </div>\n      <div>\n        numero: <input\n          value={form.numberValue}\n          onChange={form.numberOnChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">lisää</button>\n      </div>\n    </form>\n  )\n\n  export default PersonForm","import React from 'react'\n\nconst Filter = ({ text, value, onChange }) => (\n    <p>{text}\n      <input\n        value={value}\n        onChange={onChange}\n      /></p>\n  )\n\nexport default Filter","import React, { useState, useEffect } from 'react'\nimport yllapito from './services/yllapito'\nimport './index.css'\nimport Persons from './services/persons'\nimport PersonForm from './services/personForm'\nimport Filter from './services/filter'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [notificationMsg, setNotificationMsg] = useState(null)\n  const [errorNotificationMsg, setErrorNotificationMsg] = useState(null)\n\n  useEffect(() => {\n    yllapito\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n      .catch(error => {\n        console.log(error)\n        alert('virhe haettaessa tietoja')\n      })\n  }, [])\n\n  const Notification = ({ message, className }) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className={className}>\n        {message}\n      </div>\n    )\n  }\n\n  const handleRemovePerson = (person) => {\n    if (window.confirm(`Poistetaanko ${person.name}`)) {\n      yllapito\n        .remove(person)\n        .then(promise => {\n          handleNotification(`Poistettiin ${person.name}`, 'info')\n        })\n        .catch(error => {\n          handleNotification(`Henkilö ${person.name} on jo poistettu`, 'error', error)\n        })\n        removePersonFromList(person.name)\n    }\n  }\n\n  const handleNotification = (message, type, error) => {\n    if (type === 'info') {\n      setNotificationMsg(message)\n      setTimeout(() => {\n        setNotificationMsg(null)\n      }, 3000)\n    }\n    if (type === 'error') {\n      setErrorNotificationMsg(message)\n      setTimeout(() => {\n        setErrorNotificationMsg(null)\n      }, 3000)\n      console.log(error)\n    }\n  }\n\n  const update = (changedPerson) => {\n    yllapito\n      .update(changedPerson)\n      .then(returnedPerson => {\n        setPersons(persons.map(person => person.name !== changedPerson.name ? person : returnedPerson))\n        handleNotification(`Muutettiin henkilön ${newName} puhelinnumeroa`, 'info')\n      })\n      .catch(error => {\n        handleNotification(`Henkilöä ${newName} ei löydy`, 'error', error)\n        removePersonFromList(newName)\n      })\n  }\n\n  const createNew = () => {\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n      id: persons[persons.length - 1].id + 1,\n    }\n    yllapito\n      .create(newPerson)\n      .then(person => {\n        setPersons(persons.concat(person))\n        handleNotification(`Lisättiin ${person.name}`, 'info')\n      })\n      .catch(error => {\n        if (newPerson.name.length < 3 || newPerson.number.length < 8) {\n          handleNotification(`Nimen tulee olla vähintään 3 kirjainta ja puhelinnumeron 8 numeroa pitkä`, 'error', error)\n        } else {\n          handleNotification(`Henkilön ${newPerson.name} lisäys epäonnistui`, 'error', error)\n        }\n      })\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const oldPerson = persons.filter(person => person.name === newName)\n    if (oldPerson.length === 1) {\n      if (window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n        const changedPerson = { ...oldPerson[0], number: newNumber }\n        update(changedPerson)\n      }\n    } else {\n      createNew()\n    }\n    setNewName('')\n    setNewNumber('')\n  }\n\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const personsToShow = persons.filter(person =>\n    person.name.toLowerCase().includes(newFilter.toLowerCase()))\n\n  const removePersonFromList = (name) => {\n    setPersons(persons.filter(person => person.name !== name))\n  }\n\n  const form = {\n    onSubmit: addPerson,\n    nameValue: newName,\n    nameOnChange: handleNameChange,\n    numberValue: newNumber,\n    numberOnChange: handleNumberChange\n  }\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <Notification message={notificationMsg} className='info' />\n      <Notification message={errorNotificationMsg} className='error' />\n      <Filter text='rajaa näytettäviä'\n        value={newFilter}\n        onChange={handleFilterChange}\n      />\n      <h2>lisää uusi</h2>\n      <PersonForm form={form} />\n      <h2>Numerot</h2>\n      <Persons personsToShow={personsToShow} remover={handleRemovePerson} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}